{% set collection = page.collection()|length > 0 ? page.collection() : page.children.visible %}

{% if collection|length > 0 %}
    {% set collection = collection.order('header.event_date', 'desc') %}

    {% for child in collection %}
        {% if child.header.event_date|date('Y-m-d') >= 'now'|date('Y-m-d') %}
            {% include 'partials/item/event-summary.html.twig' with {'page':child, parent:page} %}
        {% endif %}
    {% endfor %}

    {% if config.plugins.pagination.enabled and collection.params.pagination %}
        {% include 'partials/page/pagination.html.twig' with {'base_url':page.url, 'pagination':collection.params.pagination} %}
    {% endif %}
{% endif %}
