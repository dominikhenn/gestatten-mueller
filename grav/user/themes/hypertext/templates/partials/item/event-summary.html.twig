{% set show_cat = parent.header.render.children.category ?? true %}

{# ------------------------------------------------------------------------ #}

<hr/>
{% if html5 %}
  <section class="snippet{% if page.taxonomy.category %}{% for cat in page.taxonomy.category %} cat_{{ cat|hyphenize }}{% endfor %}{% endif %}">
{% else %}
  <div class="snippet{% if page.taxonomy.category %}{% for cat in page.taxonomy.category %} cat_{{ cat|hyphenize }}{% endfor %}{% endif %}">
{% endif %}

<h3>{{ page.title }}</h3>
<a class="hidden" href="{{ page.url }}">{{ page.title }}</a>

<sub>
  {% if html5 %}
    <time class="hidden" datetime="{{ page.header.event_date|date("c") }}">{{ page.header.event_date|date(system.pages.dateformat.short) }}</time>
  {% else %}
    <span class="hidden datetime">{{ page.header.event_date|date(system.pages.dateformat.short) }}</span>
  {% endif %}
</sub>

{# Categories #}
{% if page.taxonomy.category and show_cat %}
    <br>
    Categories:
    <small>
        {% for category in page.taxonomy.category %}
            {{ structure.use_decorators ? '[' : '' }}<a href="{{ page.parent.url|rtrim('/') }}/category{{ config.system.param_sep }}{{ category }}">{{ category }}</a>{{ structure.use_decorators ? ']' : '' }}{{ not loop.last ? ',' : '' }}
        {% endfor %}
    </small>
{% endif %}

{{ html5 ? '</section>' : '</div>' }}
